<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="Organize the Web: Constructing Domains Enhances Pre-Training Data Curation">
  <meta name="keywords" content="WebOrganizer, Data Curation, Pre-training, Domain Construction">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebOrganizer</title>

  <!-- Fonts and styles -->
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <style>
    /* Custom styles */
    .publication-title {
      font-family: 'Google Sans', sans-serif;
      font-size: 2.5rem;
    }

    .section {
        padding: 1.5rem;
    }

    .publication-authors {
      font-family: 'Google Sans', sans-serif;
      margin: 2rem 0;
      font-size: 1.1rem;
    }

    .author-block {
      margin: 0 1rem;
    }

    .publication-links {
      margin-top: 2rem;
    }

    .link-block {
      margin: 0.5rem;
    }

    .domain-section {
      margin: 2rem 0;
    }

    .resource-card {
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .resource-card .card-content {
      flex-grow: 1;
    }

    #treemap-viz {
      width: 100%;
      height: 400px;
      margin: 0 0;
    }

    /* Adjust content font sizes */
    .content p.is-size-5 {
      font-size: 0.95rem !important;
    }

    .content ul.is-size-5 {
      font-size: 0.95rem !important;
    }

    .content ul.is-size-5 li {
      font-size: 0.95rem !important;
    }

    .subtitle.is-6 {
      font-size: 0.9rem;
    }

    .content ul li {
      font-size: 0.95rem !important;
    }

    .content p {
      font-size: 0.95rem !important;
    }

    .title.is-2 {
      font-size: 2rem;
    }

    .title.is-3 {
      font-size: 1.75rem;
    }

    .title.is-4 {
      font-size: 1.5rem;
    }

    .content .topic-highlight {
      color: #c1615d;
      font-weight: bold;
    }

    .content .format-highlight {
      color: #3c7ab6;
      font-weight: bold;
    }

    .treemap-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
        flex-wrap: wrap;
    }

    .treemap {
        flex: 1;
        min-width: 400px;
        max-width: 400px;
    }

    .example-viewer {
        margin: 20px auto;
        max-width: 1000px;
        padding: 20px;
        background: #f5f5f5;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }


    .example-navigation {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-bottom: 1rem;
    }

    .example-navigation button {
        padding: 8px 16px;
        border: none;
        background: #007bff;
        color: white;
        border-radius: 4px;
        cursor: pointer;
    }

    .example-navigation button:disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    .example-navigation span {
        font-size: 0.9em;
        color: #666;
    }

    .example-content {
        background: white;
        padding: 20px;
        border-radius: 4px;
        margin-bottom: 20px;
        overflow-x: auto;
    }

    .example-content pre {
        font-size: 0.7em;
        margin: 0;
        white-space: pre-wrap;
        word-wrap: break-word;
    }

    .example-header {
        background: #f8f9fa;
        padding: 10px 15px;
        border-radius: 4px;
        margin-bottom: 15px;
        font-size: 0.85em;
        line-height: 1.4;
        font-size: 0.9em;
    }

    .example-header .url {
        color: #0366d6;
        word-break: break-all;
        font-weight: bold;
    }

    .example-header .metadata {
        color: #586069;
        margin-top: 5px;
    }

    .domain-descriptions {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 0px;
        flex-wrap: wrap;
    }

    .domain-description {
        flex: 1;
        min-width: 400px;
        max-width: 400px;
        padding: 15px;
        border-radius: 8px;
        display: none;
    }

    .domain-description.active {
        display: block;
    }

    .domain-description h3 {
        margin: 0 0 10px 0;
        font-size: 1.2em;
        font-weight: bold;
    }

    .domain-description h3.default-heading {
        font-family: 'Castoro', cursive;
        font-style: italic;
        text-align: center;
        font-size: 1.4em;
    }

    .domain-description p {
        margin: 0;
        font-size: 0.9em;
        white-space: pre-line;
    }

  </style>
</head>

<body>
  <!-- Hero section with title and authors -->
  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">
              <img src="assets/images/icon.png" style="height: 0.9em; vertical-align: -10%;"> Organize the Web: Constructing Domains Enhances Pre-Training Data Curation
            </h1>

            <div class="publication-authors">
              <span class="author-block"><a href="https://www.cs.princeton.edu/~awettig/" target="_blank">Alexander Wettig</a><sup style="font-size: 0.6rem;">1,2</sup></span>
              <span class="author-block"><a href="https://kyleclo.com/" target="_blank">Kyle Lo</a><sup style="font-size: 0.6rem;">2</sup></span>
              <span class="author-block"><a href="https://www.sewonmin.com/" target="_blank">Sewon Min</a><sup style="font-size: 0.6rem;">3,2</sup></span>
              <span class="author-block"><a href="https://homes.cs.washington.edu/~hannaneh/" target="_blank">Hannaneh Hajishirzi</a><sup style="font-size: 0.6rem;">2,4</sup></span>
              <span class="author-block"><a href="https://www.cs.princeton.edu/~danqic/" target="_blank">Danqi Chen</a><sup style="font-size: 0.6rem;">1</sup></span>
              <span class="author-block"><a href="https://soldaini.net/" target="_blank">Luca Soldaini</a><sup style="font-size: 0.6rem;">2</sup></span>
              <div class="institutional-affiliations" style="text-align: center; margin-top: 1rem; font-size: 0.9rem;">
                <span style="margin-right: 1rem;"><sup style="font-size: 0.6rem;">1</sup>Princeton University</span>
                <span style="margin-right: 1rem;"><sup style="font-size: 0.6rem;">2</sup>Ai2</span>
                <span style="margin-right: 1rem;"><sup style="font-size: 0.6rem;">3</sup>UC Berkeley</span>
                <span><sup style="font-size: 0.6rem;">4</sup>University of Washington</span>
              </div>
            </div>

            <div class="publication-links">
              <span class="link-block">
                <a href="ARXIV_TBD" class="button is-normal is-rounded is-dark">
                  <span class="icon">
                    <i class="fas fa-book"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>

              <span class="link-block">
                <a href="https://huggingface.co/WebOrganizer" class="button is-normal is-rounded is-dark">
                  <span class="icon">
                    <p style="font-size:18px">ðŸ¤—</p>
                  </span>
                  <span>Hugging Face</span>
                </a>
              </span>

              <span class="link-block">
                <a href="https://github.com/CodeCreator/WebOrganizer" class="button is-normal is-rounded is-dark">
                  <span class="icon">
                    <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Overview section -->
  <section class="section">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column">
          <div class="content">
            <h2 class="title is-3">Explore the Corpus</h2>
            <p class="is-size-5">
              Explore different topics and formats and click to see examples! We visualize a <a href="https://huggingface.co/datasets/WebOrganizer/Corpus-200B">pre-training corpus</a> derived from CommonCrawl.
              <br>
                <span class="is-size-7">The areas show the number of tokens per domain. Move your mouse over a topic to see the distribution of formats for that topic or vice versa.</span>
            </p>

            <div class="treemap-container">
              <div id="topic-treemap" class="treemap"></div>
              <div id="format-treemap" class="treemap"></div>
            </div>

            <div class="domain-descriptions">
              <div id="topic-description" class="domain-description"></div>
              <div id="format-description" class="domain-description"></div>
            </div>

            <div class="example-viewer">
              <p>
                <em>Disclaimer: The examples are randomly sampled and not manually curated. The web pages may contain offensive content and the domain classification may be subject to errors.</em>
              </p>
              <div id="example-viewer">
                Click on a topic or format to view examples!
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <section class="section">
    <div class="container is-max-desktop">
        <div class="columns is-centered">
            <div class="column">
                <div class="content">
                    <h2 class="title is-3">Downloads</h2>
                    <p class="is-size-5">We fine-tune small (140M parameter) domain classifiers which can be used to annotate data at scale. We train these models on annotations from Llama-3.1-405B-Instruct prompted with detailed descriptions of the domains. We release the models and training data on HuggingFace Hub.</p>
                </div>
                <!-- Domain Classifiers -->
                <div class="columns is-multiline">
                    <div class="column is-half">
                    <div class="card resource-card">
                        <div class="card-content">
                        <p class="title is-4">Topic Classifier</p>
                        <div class="content">

                            <ul>
                                <li>ðŸ¤— <a href="https://huggingface.co/WebOrganizer/TopicClassifier">WebOrganizer/TopicClassifier</a></li>
                                <li>ðŸ¤— <a href="https://huggingface.co/WebOrganizer/TopicClassifier-NoURL">WebOrganizer/TopicClassifier-NoURL</a> <br>(supports classification of documents without URLs)</li>
                            </ul>
                        </div>
                        </div>
                    </div>
                    </div>

                    <div class="column is-half">
                    <div class="card resource-card">
                        <div class="card-content">
                        <p class="title is-4">Format Classifier</p>
                        <div class="content">
                            <ul>
                                <li>ðŸ¤— <a href="https://huggingface.co/WebOrganizer/FormatClassifier">WebOrganizer/FormatClassifier</a></li>
                                <li>ðŸ¤— <a href="https://huggingface.co/WebOrganizer/FormatClassifier-NoURL">WebOrganizer/FormatClassifier-NoURL</a> <br>(supports classification of documents without URLs)</li>
                            </ul>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-content">
            <h4 class="title is-4">Corpus Annotations</h3>
            <div class="content">
            <p class="is-size-5">
                Our 200B token corpus is available on HuggingfaceHub ðŸ¤— at <a href="https://huggingface.co/datasets/WebOrganizer/Corpus-200B">WebOrganizer/Corpus-200B</a>.
                It is based on the DataComps-LM 1b-1x pool and was pre-processed using best practice techniques (RefinedWeb filters and BFF deduplication).
                We provide the processed documents together with token counts, quality scores, domain annotations, and k-means cluster assignments.
            </p>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column">
            <div class="content">
          <h2 class="title is-3">Motivation</h2>
          <p class="is-size-5">
              Modern language models are trained on large, unstructured datasets consisting of trillions of tokens and obtained from crawling the web.
              We introduce WebOrganizer, a framework that organizes this vast amount of information into meaningful <span class="topic-highlight">topic</span> and <span class="format-highlight">format</span> domains.
            </p>
            <p class="is-size-5">
              These domains expose the internal composition of monolithic web corpora and we also demonstrate that they are useful for curating better pre-training data for language models.
            </p>

            <h2 class="title is-3">Takeaways</h2>
            <p class="is-size-5">
              <strong>Better Data Mixing:</strong> Constructing domains has the advantage that we can systematically study the importance of each subset. We adapt the RegMix framework for learning which domains are most useful for improving performance on MMLU and HellaSwag.
              <div style="text-align: center; margin: 20px;">
                    <img src="assets/images/mixtures_regmix.png" alt="Domain mixture optimization using RegMix" style="max-width: 100%; height: auto;">
                </div>
            </p>

            <p class="is-size-5">
            Our optimized domain mixtures improve downstream performance over the default proportions of the corpus across a range of tasks, and topics and formats mixing can be combined to further improve performance.
              <div style="text-align: center; margin: 20px;">
                <img src="assets/images/results_main.png" alt="Main results table" style="max-width: 100%; height: auto;">
              </div>
            </p>

            <p class="is-size-5">
              <strong>Complementary to Quality Filters:</strong>
              Data curation with domains and quality filters have complimentary strengths - quality filtering can discard individual documents, while domain mixing can be finely calibrated towards downstream needs. Using them both together achieves the strongest perfomrance overall.
            </p>
            <p class="is-size-5">
              <div style="text-align: center; margin: 20px;">
                    <img src="assets/images/mixtures_implicit.png" alt="Domain mixture optimization using RegMix" style="max-width: 100%; height: auto;">
                </div>
              <strong>Understanding Data Curation:</strong> Our framework also provides insights into existing data curation practices. We consider how quality filters will implicitly change the domain distributions, and observe both similarities and differences in the domain preferences of two quality filters, FineWeb-edu and DCLM-fasttext.
              We study how much we can approximate the performance of quality filters from their implicit domain mixtures. While their domain mixtures perform better than the default corpus proportions, there remains a gap in performance, suggesting that fine-grained quality filtering also contributes to the performance.
            </p>
            </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container is-max-desktop">
      <h2 class="title is-3">Citation</h2>
      <div class="content">
        <pre><code>@article{wettig2025organize,
  title={Organize the Web: Constructing Domains Enhances Pre-Training Data Curation},
  author={Alexander Wettig and Kyle Lo and Sewon Min and Hannaneh Hajishirzi and Danqi Chen and Luca Soldaini},
  year={2025}
}</code></pre>
      </div>
    <div class="institutional-logos" style="margin-top: 2rem;">
        <div style="display: flex; flex-wrap: wrap; gap: 0px; width: 100%; justify-content: center;">
            <div style="min-width: 200px; display: flex; justify-content: center; margin-bottom: 10px;">
                <a href="https://allenai.org/" target="_blank" style="display: flex; justify-content: center;">
                    <img src="assets/images/ai2_logo.png" alt="AI2 Logo" style="height: 120px;">
                </a>
            </div>
            <div style="min-width: 200px; display: flex; justify-content: center; margin-bottom: 10px;">
                <a href="https://www.princeton.edu/" target="_blank" style="display: flex; justify-content: center;">
                    <img src="assets/images/princeton_logo.png" alt="Princeton Logo" style="height: 120px;">
                </a>
            </div>
            <div style="min-width: 200px; display: flex; justify-content: center; margin-bottom: 10px;">
                <a href="https://www.berkeley.edu/" target="_blank" style="display: flex; justify-content: center;">
                    <img src="assets/images/uc_berkeley_logo.png" alt="UC Berkeley Logo" style="height: 120px;">
                </a>
            </div>
            <div style="min-width: 200px; display: flex; justify-content: center; margin-bottom: 10px;">
                <a href="https://www.washington.edu/" target="_blank" style="display: flex; justify-content: center;">
                    <img src="assets/images/uw_logo.png" alt="University of Washington Logo" style="height: 120px;">
                </a>
            </div>
        </div>
    </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <div class="content">
          <p class="is-size-7">
            This website is website adapted from <a href="https://nerfies.github.io/">Nerfie</a>, licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts moved to end of body -->
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <script src="assets/js/treemaps.js" defer></script>
</body>
</html>
